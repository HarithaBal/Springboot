
pipeline {
    agent any 
    stages {
        stage('Build') { 
            steps {
                sh "mvn clean"
            }
        }
        stage('Test') { 
            steps {
               sh "mvn test"
            }
        }
        stage('Deploy') { 
            steps {
                sh "mvn package"
            }
        }
        stage('Sonarqube') {
          environment {
          scannerHome = tool 'SonarQubeScanner'
             }    steps {
              withSonarQubeEnv('sonarqube') {
             sh "${scannerHome}/bin/sonar-scanner"
             }        timeout(time: 10, unit: 'MINUTES') {
                 waitForQualityGate abortPipeline: true
              }
            }
        }
      }
 }     
      
